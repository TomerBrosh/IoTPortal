<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="iot-toolbar" attributes="soldiers">
  <template>
    <style>

      :host {
        visibility: hidden;
        display: flex;
      }


      .toolbar {
        background-color: #607D8B;
        width: 100%;
        text-align: center;
      }

      .title {
        font-size: 630%;
        font-weight:bold;
        height:120px;
        text-shadow: 0 0 6px #606060;
        color: #eef8ff;
        margin-right:5%;
      }
      .secondary {
        font-size: 200%;
        color: #eef8ff;
      }

      paper-fab {
        margin-left: 7px;
        /*border-radius: 10%;*/
        width: 40px;
        height: 40px;
        --paper-fab-disabled-background: none;
        --paper-fab-disabled-text: #d5f5ff;

      }

      paper-fab[icon="warning"] {
        --paper-fab-background: #ffc853;
      }

      paper-fab[icon*="local-hospital"] {
        --paper-fab-background: #71291c;
      }

      paper-fab[icon="help"] {
        --paper-fab-background: #8993c5;
      }

      paper-badge {
        --paper-badge-background: none;
        --paper-badge-text-color: #ffffff;
        --paper-badge-width: 15px;
        --paper-badge-opacity: 0.8;
        --paper-badge-height: 15px;
        border-radius: 100% 100% 100% 0;
        box-shadow: 0 0 10px 5px #ff5b62 inset;
        border: 3px #fff0f4 solid;
      }

    </style>
    <paper-material class="toolbar">
      <div class="title">פורטל IoT</div>
      <div class="secondary">עוד משפט גנרי שלא נותן כלום...</div>
      <!--<paper-fab id="toolbarHurt" icon="warning" disabled$="{{!count.hurt}}"></paper-fab>-->
      <!--<paper-fab id="toolbarCrit" icon="maps:local-hospital" disabled$="{{!count.critical}}"></paper-fab>-->
      <!--<paper-fab id="toolbarUnknown" icon="help" disabled$="{{!count.unknown}}"></paper-fab>-->
      <!--<template is="dom-if" if$="{{count}}">-->
        <!--<template is="dom-if" if$="{{count.hurt}}">-->
          <!--<paper-badge for="toolbarHurt" label$="{{count.hurt}}"></paper-badge>-->
        <!--</template>-->
        <!--<template is="dom-if" if$="{{count.critical}}">-->
          <!--<paper-badge for="toolbarCrit" label$="{{count.critical}}"></paper-badge>-->
        <!--</template>-->
        <!--<template is="dom-if" if$="{{count.unknown}}">-->
          <!--<paper-badge for="toolbarUnknown" label$="{{count.unknown}}"></paper-badge>-->
        <!--</template>-->
      <!--</template>-->
    </paper-material>
  </template>
  <script>
    Polymer({
      is: 'iot-toolbar',

      behaviors: [Polymer.NeonAnimationBehavior, Polymer.NeonAnimationRunnerBehavior],

      properties: {

        soldiers: {
          type: Object,
          notify: true
        },

        count: {
          type: Object,
          value: null,
          computed: 'computeTotal(soldiers)',
          notify: true
        },

        animationConfig: {
          value: function () {
            return {
              // fade-in-animation is run with a 50ms delay from slide-down-animation
              'entry': {
                name: 'slide-from-right-animation',
                node: this,
                timing: {"duration": 1000}

          }
            }
          }
        },

        exitAnimation: {
          value: 'fade-out-animation'
        }
      },

      listeners: {
        'neon-animation-finish': '_onNeonAnimationFinish'
      },

      _onNeonAnimationFinish: function () {
        console.log("Welcome!");
      },

      show: function () {
        this.style.visibility = 'visible';
        this.playAnimation('entry');
      },

      ready: function () {
        this.async(function () {
          this.show();
        })
      },

      computeTotal: function (soldiers) {

        var critical = null, hurt = null, unknown = null;
        soldiers.forEach(function (soldier) {
          switch (soldier.status) {
            case 1:
              hurt++;
              break;
            case 2:
              critical++;
              break;
            case 3:
              unknown++;
              break;
          }
        });
        return {'critical': critical, 'hurt': hurt, 'unknown': unknown}

      }
    });
  </script>
</dom-module>
